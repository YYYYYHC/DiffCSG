<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description"
          content="DiffCSG: Differentiable CSG via Rasterization">
    <meta name="keywords" content="DiffCSG, CSG, Differentiable Rendering, Rasterization">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DiffCSG: Differentiable CSG via Rasterization</title>
    <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
    rel="stylesheet">

    <link rel="stylesheet" href="./resources/css/bulma.min.css">
    <link rel="stylesheet" href="./resources/css/bulma-carousel.min.css">
    <link rel="stylesheet" href="./resources/css/bulma-slider.min.css">
    <link rel="stylesheet" href="./resources/css/fontawesome.all.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="stylesheet" href="./resources/css/index.css">
    <link rel="icon" href="./resources/imgs/icon.png">
  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="./resources/js/fontawesome.all.min.js"></script>
    <script src="./resources/js/bulma-carousel.min.js"></script>
    <script src="./resources/js/bulma-slider.min.js"></script>
    <script src="./resources/js/index.js"></script>
</head>

<body>

    <!-- <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
          <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>
        <div class="navbar-menu">
          <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
            <a class="navbar-item" href="https://keunhong.com">
            <span class="icon">
                <i class="fas fa-home"></i>
            </span>
            </a>
      
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link">
                More Research
              </a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://hypernerf.github.io">
                  HyperNeRF
                </a>
                <a class="navbar-item" href="https://nerfies.github.io">
                  Nerfies
                </a>
                <a class="navbar-item" href="https://latentfusion.github.io">
                  LatentFusion
                </a>
                <a class="navbar-item" href="https://photoshape.github.io">
                  PhotoShape
                </a>
              </div>
            </div>
          </div>
      
        </div>
    </nav> -->

    <!-- Title, authors -->
    <section class="hero">
        <div class="hero-body">
          <div class="container is-max-desktop">
            <div class="columns is-centered">
              <div class="column has-text-centered">
                <h1 class="title is-1 publication-title">DiffCSG: Differentiable CSG via Rasterization</h1>
                <h3 class="title is-4" style="color: red">Siggrapha Asia 2023 Conference Track</h3>
                <div class="is-size-5 publication-authors">
                  <span class="author-block">
                    <a href="https://yyyyyhc.github.io/" target="_blank">Haocheng Yuan</a><sup>1</sup>,</span>

                  <span class="author-block">
                      <a href="https://www-sop.inria.fr/members/Adrien.Bousseau/" target="_blank">Adrien Bousseau</a><sup>2</sup>,
                  </span>
                  
                  <span class="author-block">
                    <a href="https://haopan.github.io/" target="_blank">Hao Pan</a><sup>3</sup>,
                  </span>

                  <span class="author-block">
                    Chengquan Zhang<sup>4</sup>,</span>
                  
                  
                  <span class="author-block">
                    <a href="http://www0.cs.ucl.ac.uk/staff/n.mitra/" target="_blank">Niloy J. Mitra</a><sup>5,6</sup>,
                  </span>

                  <span class="author-block">
                    <a href="https://enigma-li.github.io/" target="_blank">Changjian Li</a><sup>1</sup>
                  </span>
                </div>
      
                <div class="is-size-5 publication-authors">
                  <span class="author-block"><sup>1</sup>University of Edinburgh,</span>
                  <span class="author-block"><sup>2</sup>Inria, Universit√© C√¥te d'Azur,</span> <br>
                  <span class="author-block"><sup>3</sup>Microsoft Research Asia,</span>
                  <span class="author-block"><sup>4</sup>Nanjing University</span>
                  <span class="author-block"><sup>5</sup>University College London,</span>
                  <span class="author-block"><sup>6</sup>Adobe Research</span>
                  
                </div>
      
                <div class="column has-text-centered">
                  <div class="publication-links">
                    <!-- PDF Link. -->
                    <span class="link-block">
                      <a href="https://yyyyyhc.github.io/DiffCSG/"
                         class="external-link button is-normal is-rounded is-dark" target="_blank">
                        <span class="icon">
                            <i class="fas fa-file-pdf"></i>
                        </span>
                        <span>Paper</span>
                      </a>
                    </span>
                    <span class="link-block">
                      <a href="https://yyyyyhc.github.io/DiffCSG/"
                         class="external-link button is-normal is-rounded is-dark" target="_blank">
                        <span class="icon">
                            <i class="ai ai-arxiv"></i>
                        </span>
                        <span>arXiv</span>
                      </a>
                    </span>
                    <!-- Video Link. -->
                    <span class="link-block">
                      <a href="https://yyyyyhc.github.io/DiffCSG/"
                         class="external-link button is-normal is-rounded is-dark" target="_blank">
                        <span class="icon">
                            <i class="fab fa-youtube"></i>
                        </span>
                        <span>Video</span>
                      </a>
                    </span>
                    <!-- Code Link. -->
                    <span class="link-block">
                      <a href="https://yyyyyhc.github.io/DiffCSG/" target="_blank"
                         class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                            <i class="fab fa-github"></i>
                        </span>
                        <span>Code</span>
                        </a>
                    </span>
                    
                    <!-- Sippl. Link. -->
                    <!-- <span class="link-block">
                      <a href=""
                         class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                            <i class="fas fa-folder"></i>
                        </span>
                        <span>Suppl.</span>
                      </a>
                    </span> -->

                  </div>
      
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
    <!-- Teaser -->
    <section class="hero teaser">
        <div class="container is-max-desktop">
            <div class="hero-body">
            <img src="./resources/imgs/teaser.png" class="teaser" alt="Teaser Image"/>
            <h3 class="subtitle has-text-justified">
              Given the CSG model of a bike (left), our DiffCSG renders the corresponding shape in a differentiable manner, 
              such that its continuous parameters can be optimized to best match multi-view renderings of a target shape (right, pink). 
              Our solution builds upon differentiable rasterization to compute image gradients with respect to CSG parameters (middle). 
              Here we visualize the per-pixel gradient contribution for the global scale parameter ùë†, the <font style="color: rgb(255,43,0)">seat height ‚Ñé</font>, the<font style="color: rgb(255,209,0)"> handle size ùëô</font>, 
              and the <font style="color: rgb(0,211,255)">wheel radius ùëü </font>(we cropped the gradient visualizations around the areas of interest for ‚Ñé, ùëô and ùëü). 
              In this example, the optimization decreased the seat height, increased the wheel radius, and made the handles vanish by setting their 
              size to 0 (top middle). The optimization also adjusted the orientation of the pedals.
            </h3>
            </div>
        </div>
    </section>

    <!-- Video Results -->
    <section class="hero is-light is-small"> 
        <div class="hero-body">
          <div class="container">
            <div id="results-carousel" class="carousel results-carousel">
              <div class="item item-bike">
                <video poster="" id="bike" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/bike.mp4"
                          type="video/mp4">
                </video>
              </div>
              <div class="item item-frog">
                <video poster="" id="frog" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/frog.mp4"
                          type="video/mp4">
                </video>
              </div>
              <div class="item item-ship">
                <video poster="" id="ship" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/ship.mp4"
                          type="video/mp4">
                </video>
              </div>
              <div class="item item-snowman">
                <video poster="" id="snowman" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/snowman.mp4"
                          type="video/mp4">
                </video>
              </div>
              <div class="item item-train">
                <video poster="" id="train" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/train.mp4"
                          type="video/mp4">
                </video>
              </div>
              <div class="item item-tux">
                <video poster="" id="tux" autoplay controls muted loop playsinline height="100%">
                  <source src="./resources/videos/tux.mp4"
                          type="video/mp4">
                </video>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Abstract and Paper Video -->
    <section class="section">
        <div class="container is-max-desktop">
            <div class="columns is-centered has-text-centered">
                <div class="column is-four-fifths">
                    <!-- Abstract. -->
                    <h2 class="title is-3">Abstract</h2>
                    <div class="content has-text-justified">
                        <p>
                          Differentiable rendering is a key ingredient for inverse rendering and machine learning, 
                          as it allows to optimize scene parameters (shape, materials, lighting) to best fit target images. 
                          Differentiable rendering requires that each scene parameter relates to pixel values through differentiable operations. 
                          While 3D mesh rendering algorithms have been implemented in a differentiable way, these algorithms do not directly extend 
                          to Constructive-Solid-Geometry~(CSG), a popular parametric representation of shapes, because the underlying 
                          boolean operations are typically performed with complex black-box mesh-processing libraries.
                          We present an algorithm, DiffCSG, to render CSG models in a differentiable manner. 
                          Our algorithm builds upon CSG rasterization, which displays the result of boolean operations between primitives without explicitly 
                          computing the resulting mesh and, as such, %maintains a continuous relation from pixels to primitive parameters. 
                          bypasses black-box mesh processing.
                          We describe how to implement CSG rasterization within a differentiable rendering pipeline, taking special care to apply antialiasing 
                          along primitive intersections to obtain gradients in such critical areas. Our algorithm is simple and fast, can be easily incorporated 
                          into modern machine learning setups, and enables a range of applications for computer-aided design, including direct and image-based editing of CSG primitives.
                        </p>
                    </div>
                </div>
            </div>
            <!--/ Abstract. -->

            <!-- Paper video. -->
            <!-- <div class="columns is-centered has-text-centered">
              <div class="column is-four-fifths">
                  <h2 class="title is-3">Video (Trailer)
                  </h2>
                  <div class="publication-video">
                  <iframe src="https://www.youtube.com/embed/x8r9DqUIN-U?si=0uCL-f_n8rV7nL_M;showinfo=0"
                          frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                  </div>
              </div>
              </div> -->
              <!--/ Paper video. -->
        
            <!-- Paper video. -->
            <!-- <div class="columns is-centered has-text-centered">
              <div class="column is-four-fifths">
                  <h2 class="title is-3">Video (Long Presentation)</h2>
                  <div class="publication-video">
                  <iframe src="https://www.youtube.com/embed/83Fnvj2H0_g?si=J26dhBGGhC8ES_o_;showinfo=0"
                          frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                  </div>
              </div>
              </div> -->
              <!--/ Paper video. -->
        </div>
    </section>

    <!-- Method -->
    <section class="section">
        <div class="container is-max-desktop">

            <!-- Overview -->
            <div class="columns is-centered">
                <div class="column is-full-width">
                    <h2 class="title is-3 has-text-centered">Method</h2>
                    <img src="./resources/imgs/method.png" class="" alt="Method Image"/>
                    <div class="content has-text-justified">
                        <p>
                            <b>Overview.</b> Our algorithm adapts a differentiable rasterization pipeline (light blue) to render CSG models (a) in a differentiable way. 
                            First, we replace the standard depth test by the Goldfeather algorithm (b), which selects among front and back faces of the CSG primitives the 
                            ones to be displayed according to boolean operations. Second, we detect intersection edges between CSG primitives (c) and provide these edges to 
                            the anti-aliasing module (d). Proper anti-aliasing is critical to allow back-propagation of gradients from the final image all the way to the primitive parameters. 
                        </p>
                    </div>
                </div>
            </div>


            <div class="columns is-centered has-text-centered">

                <!-- Segmentation. -->
                <div class="column">
                    <div class="content">
                    <h3 class="title is-4">Goldfeather Algorithm</h3>
                    <img src="./resources/imgs/image_processing.png" class="is-centered" alt="Processing Image"/>
                    <div class="content has-text-justified">
                    <p>
                        <b>CSG Rasterization.</b> The algorithm takes as input individual primitives of the CSG model (a). For an intersection, only the front-facing fragments that are occluded by an odd number of polygons are displayed (b, crosses depict occlusions along viewing rays). 
                        For a subtraction, the two primitives apply different parity tests against each other (c). Considering <span style="color: red;">B</span> - <span style="color: blue;">A</span>, the algorithm displays the front-facing fragments of <span style="color: red;">B</span> that are occluded by an even number of polygons from <span style="color: blue;">A</span>, and the back-facing fragments of <span style="color: blue;">A</span> that are occluded by an odd number of polygons from <span style="color: red;">B</span>.
                    </p>
                    </div>
                    </div>
                </div>
                <!--/ Segmentation. -->
            
                <!-- Block. -->
                <div class="column">
                    <div class="content">
                    <h3 class="title is-4">Antialiasing</h3>
                        <img src="./resources/imgs/blocks.png" class="is-centered" alt="Program Parsing"/>
                        <div class="content has-text-justified">
                        <p>
                        <b>Pixel Antialiasing.</b> On the left, an intersection edge (p,q) is formed by the top face of the gray cube and the vertical face of the blue cube. The two endpoints of the intersection edge are colored red.On the right, when considering the color blending of the crossing pixels (i.e., the gray pixel A and the blue pixel B) of the intersection edge, two typical options may apply depending on which pixel is most covered by the edge. In the top case, edge (p,q) intersects the segment connecting centers of A, B inside pixel B, which leads to the color of A blending into B, i.e. <span style="color: blue;">Color<sup>B</sup><sub>after</sub></span> = &alpha; * <span style="color: red;">Color<sup>A</sup></span> + (1-&alpha;)* <span style="color: blue;">Color<sup>B</sup><sub>before</sub></span>. In the bottom case, the edge covers A the most, so the color of B is blended into A, i.e. <span style="color: red;">Color<sup>A</sup><sub>after</sub></span> = &alpha; * <span style="color: blue;">Color<sup>B</sup></span> + (1-&alpha;) * <span style="color: red;">Color<sup>A</sup><sub>before</sub></span>. The blending weight &alpha; is a linear function of the location of the crossing point, from zero at the midpoint to 0.5 at the pixel center.
√ü                        </p>
                    </div>
                    </div>
                </div>
                <!--/ Block. -->

                </div>

        </div>
    </section>
    
    <!-- Results -->
    <section class="section">
        <div class="container is-max-desktop">

            <!-- Overview -->
            <div class="columns is-centered">
                <div class="column is-full-width">
                    <h2 class="title is-3 has-text-centered">Visual Result</h2>
                    <img src="./resources/imgs/gallery.png" class="" alt="Results Gallery"/>
                    <div class="content has-text-justified">
                        <p>
                            <b> Visual Results.</b> Examples of shapes from our benchmark that require proper treatment of intersection edges to be optimized. Without our anti-aliasing, the optimization remains stuck in its initial state due to the discontinuities introduced by the difference operator. In each example, the source shape, resultant shape, and one of the target images rendered with per-primitive colors are shown. Black arrows indicate the desired change between the source and the target.
                        </p>
                    </div>
                    <!-- <h3 class="title is-4">More Supplementary Files:</h3>
                    1) Example Abstract Syntax Tree: <a href="./resources/suppl/AST.pdf" target="_blank">AST.pdf</a> <br>
                    2) Detailed ChatGTP Conversation: <a href="./resources/suppl/GPT-Conversation.pdf" target="_blank">GPT-Converstation.pdf</a> <br>
                    3) More Commenting Results: <a href="./resources/suppl/Commenting-Results.pdf" target="_blank">Commenting-Results.pdf</a> -->
                </div>
            </div>

        </div>
    </section>

    <!-- Citation -->
    <!-- <section class="section" id="BibTeX">
        <div class="container is-max-desktop content">
          <h2 class="title">BibTeX</h2>
          <pre><code>@inproceedings{yuan2024cadtalk,
            title={CADTalk: An Algorithm and Benchmark for Semantic Commenting of CAD Programs},
            author={Yuan, Haocheng and Xu, Jing and Pan, Hao and Bousseau, Adrien and Mitra, Niloy J and Li, Changjian},
            booktitle={Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition},
            pages={3753--3762},
            year={2024}
          }          
          </code></pre>
        </div>
    </section> -->

    <footer class="footer">
        <div class="container">
          <div class="columns is-centered">
            <div class="column is-8">
              <div class="content">
                <h2 class="title">Acknowlegement</h2>
                <p style="font-size:120%;">
                  The authors would like to thank the reviewers for their valuable suggestions, Kuankuan Cheng and Shuyuan Zhang for helping prepare the benchmark and set up the comparison. NM was supported by Marie Sk≈Çodowska-Curie grant agreement No. 956585, gifts from Adobe, and UCL AI Centre; AB was supported by ANR-NSF NaturalCAD (ANR-23-CE94-0003); CJ was supported by a startup grant, a Bayes seed funding, and a GAIL seed funding from the University of Edinburgh, and gifts from Google Cloud research credits and Adobe.
                </p>
                <p>
                    We borrow the source code of this website from  <a
                    href="https://nerfies.github.io/" target="_blank">Nerfies</a>. Last update: June 2024.
                </p>
              </div>
            </div>
          </div>
        </div>
      </footer>



</body>
</html>
